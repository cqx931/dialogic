using System.IO;
using Antlr4.Runtime;
using Antlr4.Runtime.Misc;
using Antlr4.Runtime.Tree;
//using Dialogic;
using IToken = Antlr4.Runtime.IToken;
using ParserRuleContext = Antlr4.Runtime.ParserRuleContext;

public partial class GScriptBaseVisitor<Result> : AbstractParseTreeVisitor<Result>, IGScriptVisitor<Result> {

    public static void Main(string[] args) {

        string input = "Say I would like to emphasize this\nPause 1000\n";
        ITokenSource lexer = new GScriptLexer(new AntlrInputStream(input));
        ITokenStream tokens = new CommonTokenStream(lexer);
        GScriptParser parser = new GScriptParser(tokens);
        parser.AddErrorListener(new ThrowExceptionErrorListener());

        var context = parser.dialog();
        var visitor = new GScriptBaseVisitor<Result>();
        var dialogs = visitor.Visit(context);

        System.Console.WriteLine(dialogs);
    }

    class ThrowExceptionErrorListener : IAntlrErrorListener<IToken> {
        void IAntlrErrorListener<IToken>.SyntaxError(TextWriter output, IRecognizer recognizer, IToken offendingSymbol,
            int line, int charPositionInLine, string msg, RecognitionException e) {
            throw new System.Exception("SyntaxError: " + line + " " + msg);
        }
    }
}